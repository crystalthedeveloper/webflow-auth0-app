{"mappings":";;;;;;;;sDACM;;;;AAGN,+CAAqB,IAAI,CAAC,CAAA;AACxB,6BAA6B;AAC/B,GAAG,KAAK,CAAC,CAAA;IACP,QAAQ,KAAK,CAAC,gCAAgC;AAChD;AAEA;AAEA,MAAM,4BAAM;AAEZ,kBAAkB;AAClB,0BAAI,GAAG,CAAC,YAAK;IACX,QAAQ;IACR,SAAS;IACT,gBAAgB;AAClB;AAEA,4BAA4B;AAC5B,0BAAI,OAAO,CAAC,KAAK;AAEjB,0BAA0B;AAC1B,0BAAI,GAAG,CAAC,eAAQ,IAAI;AAEpB,iDAAiD;AACjD,eAAe,qCAAe,KAAK;IACjC,IAAI;QACF,MAAM,MAAM,CAAC,uCAAuC,6BAAoC,MAAM,CAAC;QAC/F,MAAM,UAAU;YACd,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,CAAC,OAAO,qEAAgC,CAAC;YAC5D;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,QAAQ;oBACN,OAAO;gBACT;YACF;QACF;QAEA,MAAM,WAAW,MAAM,MAAM,KAAK;QAClC,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,QAAQ,GAAG,CAAC,iCAAiC;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wCAAwC;IACxD;AACF;AAEA,eAAe;AACf,0BAAI,IAAI,CAAC,WAAW,OAAO,KAAK;IAC9B,MAAM,SAAE,KAAK,YAAE,QAAQ,EAAE,GAAG,IAAI,IAAI;IAEpC,IAAI;QACF,MAAM,iBAAiB,MAAM,KAAK,8BAA8B,CAAC,OAAO;QACxE,MAAM,qCAAe,QAAQ,wCAAwC;QACrE,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,SAAS;QAA8B;IAChE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB,MAAM,OAAO;QAC7C,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAmB;IACnD;AACF;AAEA,MAAM;AACN,0BAAI,MAAM,CAAC,4BAAM;IACf,QAAQ,GAAG,CAAC,CAAC,0BAA0B,EAAE,2BAAK,CAAC;AACjD","sources":["pages/api/server.js"],"sourcesContent":["const express = require('express');\nconst { createProxyMiddleware } = require('http-proxy-middleware');\nconst dotenv = require('dotenv');\nconst cors = require('cors');\nimport('node-fetch').then(fetch => {\n  // Now you can use fetch here\n}).catch(err => {\n  console.error('Failed to import node-fetch:', err);\n});\n\ndotenv.config();\n\nconst app = express();\n\n// CORS middleware\napp.use(cors({\n  origin: 'https://firststep-46e83b.webflow.io', // Allow only the Webflow origin\n  methods: 'GET, POST, PUT, DELETE, OPTIONS',\n  allowedHeaders: 'Content-Type, Authorization'\n}));\n\n// Handle preflight requests\napp.options('*', cors());\n\n// Body parsing middleware\napp.use(express.json());\n\n// Function to add user to Webflow CMS collection\nasync function addMemberToCMS(email) {\n  try {\n    const url = `https://api.webflow.com/v2/collections/${process.env.WEBFLOW_COLLECTION_ID}/items`;\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${process.env.WEBFLOW_API_TOKEN}`\n      },\n      body: JSON.stringify({\n        fields: {\n          email: email\n        }\n      })\n    };\n\n    const response = await fetch(url, options);\n    const data = await response.json();\n    console.log('User added to CMS collection:', data);\n  } catch (error) {\n    console.error('Error adding user to CMS collection:', error);\n  }\n}\n\n// Signup route\napp.post('/signup', async (req, res) => {\n  const { email, password } = req.body;\n\n  try {\n    const userCredential = await auth.createUserWithEmailAndPassword(email, password);\n    await addMemberToCMS(email); // Add user to membership CMS collection\n    res.status(200).json({ message: 'User signed up successfully' });\n  } catch (error) {\n    console.error('Sign-up error:', error.message);\n    res.status(500).json({ error: 'Error signing up' });\n  }\n});\n\nconst PORT = process.env.PORT || 1234;\napp.listen(PORT, () => {\n  console.log(`Server is running on port ${PORT}`);\n});\n"],"names":[],"version":3,"file":"index.js.map"}